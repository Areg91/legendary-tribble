                                                                          Домашнее задание к занятию «Уязвимости и атаки на информационные системы» 
Инструкция по выполнению домашнего задания
Сделайте fork репозитория c шаблоном решения к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw).
Выполните клонирование этого репозитория к себе на ПК с помощью команды git clone.
Выполните домашнее задание и заполните у себя локально этот файл README.md:
впишите вверху название занятия и ваши фамилию и имя;
в каждом задании добавьте решение в требуемом виде: текст/код/скриншоты/ссылка;
для корректного добавления скриншотов воспользуйтесь инструкцией «Как вставить скриншот в шаблон с решением»;
при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в инструкции по MarkDown.
После завершения работы над домашним заданием сделайте коммит (git commit -m "comment") и отправьте его на Github (git push origin).
Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
Любые вопросы задавайте в чате учебной группы и/или в разделе «Вопросы по заданию» в личном кабинете.
Желаем успехов в выполнении домашнего задания.

Задание 1
Скачайте и установите виртуальную машину Metasploitable: https://sourceforge.net/projects/metasploitable/.

Это типовая ОС для экспериментов в области информационной безопасности, с которой следует начать при анализе уязвимостей.

Просканируйте эту виртуальную машину, используя nmap.

Попробуйте найти уязвимости, которым подвержена эта виртуальная машина.

Сами уязвимости можно поискать на сайте https://www.exploit-db.com/.

Для этого нужно в поиске ввести название сетевой службы, обнаруженной на атакуемой машине, и выбрать подходящие по версии уязвимости.

Ответьте на следующие вопросы:

Какие сетевые службы в ней разрешены?
Какие уязвимости были вами обнаружены? (список со ссылками: достаточно трёх уязвимостей)
Приведите ответ в свободной форме.

Решение 1 
1.Сканирование портов с помощью Nmap
После установки и запуска виртуальной машины Metasploitable мы можем просканировать её порты с использованием Nmap. Предположим, что IP-адрес нашей виртуальной машины — 192.168.56.101. Запустим команду:

nmap -sV -p- 192.168.56.101

Параметры означают следующее:
- -sV — определение версий служб, работающих на открытых портах.
- -p- — сканирование всех портов.

Пример вывода может выглядеть так:
![Снимок1](https://github.com/user-attachments/assets/3ed198ca-e5ec-4d2f-90e4-55c4e7938ad0)

2.Анализ сетевых служб

На основе результатов сканирования видно, что на этой виртуальной машине работают несколько сетевых служб, включая FTP, SSH, Telnet, SMTP, HTTP, Samba и другие. Вот список некоторых наиболее интересных сервисов:

- Port 21: FTP сервер (vsftpd 2.3.4)
- Port 22: SSH сервер (OpenSSH 4.7p1)
- Port 23: Telnet сервер
- Port 80: Веб-сервер (Apache httpd 2.2.8)
- Port 139, 445: Samba (Samba smbd 3.X - 4.X)
- Port 3306: MySQL сервер (MySQL 5.0.51a-3ubuntu5)
- Port 5900: VNC сервер

3.Поиск уязвимостей

Теперь перейдем к поиску уязвимостей для этих служб. Для этого воспользуемся сайтом https://www.exploit-db.com/, где можно искать эксплойты по названию сервиса и версии.

 vsftpd 2.3.4 (Backdoor Command Execution)

Уязвимая служба: FTP (порт 21)

Описание: В версии vsftpd 2.3.4 существует бэкдор, который позволяет удалённому злоумышленнику выполнять произвольные команды на сервере.

Ссылка на эксплойт: https://www.exploit-db.com/exploits/17491

4. Samba 3.X - 4.X (User Map Script)

Уязвимые службы: SMB (порты 139, 445)

Описание: В старых версиях Samba существует уязвимость, которая позволяет удаленному пользователю получить привилегии root через использование пользовательских карт скриптов.

Ссылка на эксплойт: https://www.exploit-db.com/exploits/16320

5.  ProFTPD 1.3.1 (Format String Vulnerability)

Уязвимая служба: FTP (порт 2121)

Описание: В версии ProFTPD 1.3.1 существует уязвимость форматной строки, позволяющая удаленно выполнить код на сервере.

Ссылка на эксплойт: https://www.exploit-db.com/exploits/15968

Заключение

Виртуальная машина Metasploitable содержит множество уязвимых сетевых служб, таких как FTP, SMB, и других...

Задание 2
Проведите сканирование Metasploitable в режимах SYN, FIN, Xmas, UDP.

Запишите сеансы сканирования в Wireshark.

Ответьте на следующие вопросы:

Чем отличаются эти режимы сканирования с точки зрения сетевого трафика?
Как отвечает сервер?
Приведите ответ в свободной форме.

Решение 2
Различия между режимами сканирования Nmap
Nmap поддерживает различные типы сканирований, каждый из которых имеет свои особенности и использует разные методы взаимодействия с целевым хостом. Рассмотрим различия между режимами SYN, FIN, Xmas и UDP сканирования с точки зрения сетевого трафика и ответов сервера.

Режимы TCP сканирования
1. SYN Scanning
Этот метод также известен как "полуоткрытое" сканирование. Он отправляет SYN-пакет на целевой порт и ожидает ответа от сервера. Если порт открыт, сервер возвращает пакет SYN/ACK, а затем сканирующий компьютер отправляет RST-пакет, закрывая соединение до установления полного TCP-соединения. Это делает процесс менее заметным для системы обнаружения вторжений (IDS), поскольку соединение никогда полностью не устанавливается.

- Трафик:  
  - Отправляется SYN-пакет.
  - Сервер отвечает SYN/ACK, если порт открыт, или RST, если закрыт.
  - Клиент отправляет RST для закрытия соединения.

- Ответ сервера:
  - Открытый порт: SYN/ACK.
  - Закрытый порт: RST.
 
  2.  FIN Scanning
При этом режиме сканирования отправляется FIN-пакет на целевой порт. Согласно спецификации TCP, закрытые порты должны отвечать пакетом RST на FIN-пакеты, тогда как открытые порты игнорируют их. Этот метод используется для обхода IDS, так как он не инициирует полное TCP-соединение.

- Трафик:
  - Отправляется FIN-пакет.
  - Сервер отвечает RST, если порт закрыт, и ничего не отвечает, если порт открыт.

- Ответ сервера:
  - Закрытый порт: RST.
  - Открытый порт: отсутствие ответа.
 
    3. Xmas Scanning
Здесь отправляются пакеты с установленными флагами FIN, URG и PSH. Как и в случае с FIN-сканированием, закрытые порты отвечают пакетом RST, а открытые порты игнорируют такие пакеты.

- Трафик:
  - Отправляются пакеты с установленными флагами FIN, URG и PSH.
  - Сервер отвечает RST, если порт закрыт, и ничего не отвечает, если порт открыт.

- Ответ сервера:
  - Закрытый порт: RST.
  - Открытый порт: отсутствие ответа.
 
    4. UDP Scanning
Поскольку протокол UDP является безсостоянием, ответы на запросы могут сильно отличаться от тех, что наблюдаются в TCP. При сканировании UDP-портов Nmap отправляет пустой UDP-пакет на целевой порт. Если порт закрыт, сервер обычно отвечает ICMP-сообщением типа "Destination Unreachable". Если порт открыт, то никакого ответа не будет, либо сервер может отправить обратно данные.

- Трафик:
  - Отправляется пустой UDP-пакет.
  - Сервер отвечает ICMP-сообщением "Destination Unreachable", если порт закрыт, или ничего не отвечает, если порт открыт.

- Ответ сервера:
  - Закрытый порт: ICMP "Destination Unreachable".
  - Открытый порт: отсутствие ответа или возврат данных.

 Запись сеансов сканирования в Wireshark

Чтобы записать трафик каждого режима сканирования в Wireshark, выполните следующие шаги:

1. Откройте Wireshark и начните захват пакетов на интерфейсе, который используется для связи с Metasploitable.
   
2. Выполните каждое из сканирований, используя соответствующие параметры Nmap:
   nmap -sS 192.168.56.101 -p 21,22,80,443
   nmap -sF 192.168.56.101 -p 21,22,80,443
   nmap -sX 192.168.56.101 -p 21,22,80,443
   nmap -sU 192.168.56.101 -p 53,161
3. После завершения каждого сканирования остановите захват пакетов в Wireshark и сохраните результаты захвата в отдельный файл для анализа.

Открыв файлы захвата в Wireshark, мы можем увидеть разницу в трафике для каждого типа сканирования. Например:

- SYN Scanning: Вы увидите последовательность SYN → SYN/ACK → RST для открытых портов и SYN → RST для закрытых портов.
- FIN Scanning: Для закрытых портов будут видны пакеты RST, а для открытых – тишина.
- Xmas Scanning: Аналогично FIN-сканированию, но с дополнительными установленными флагами.
- UDP Scanning: Для закрытых портов будут видны ICMP-сообщения "Destination Unreachable", а для открытых – отсутствие ответа или ответные...

   
